# ğŸ¯ **ìµœì¢… E-R ë‹¤ì´ì–´ê·¸ë¨ (v2)**

## **ğŸ“Š ìµœì¢… í…Œì´ë¸” êµ¬ì„± (ì´ 12ê°œ)**

| **ë²ˆí˜¸** | **í…Œì´ë¸”ëª…**          | **ì£¼ìš” ì†ì„±**                                                       | **ì„¤ëª…**                  |
| -------- | --------------------- | ------------------------------------------------------------------- | ------------------------- |
| 1        | **users**             | user_id, email, name, role, api_key, password_hash                  | ì‚¬ìš©ì ê³„ì •               |
| 2        | **document_types**    | doc_type_id, type_name, model_name, sorting_method                  | ë¬¸ì„œ íƒ€ì… ì •ì˜ **(ìˆ˜ì •)** |
| 3        | **projects**          | project_id, user_id, doc_type_id, project_name, total_pages, status | í”„ë¡œì íŠ¸/ì„¸ì…˜             |
| 4        | **pages**             | page_id, project_id, page_number, image_path, analysis_status       | í˜ì´ì§€ ì •ë³´               |
| 5        | **layout_elements**   | element_id, page_id, class_name, bbox_x/y/width/height              | ë ˆì´ì•„ì›ƒ ìš”ì†Œ **(ìˆ˜ì •)**  |
| 6        | **text_contents**     | text_id, element_id, ocr_text, ocr_confidence                       | OCR ê²°ê³¼                  |
| 7        | **ai_descriptions**   | ai_desc_id, element_id, description, ai_model                       | AI ì„¤ëª…                   |
| 8        | **question_groups**   | question_group_id, page_id, anchor_element_id, start_y, end_y       | ë¬¸ì œ ê·¸ë£¹ **(ìˆ˜ì •)**      |
| 9        | **question_elements** | qe_id, question_group_id, element_id, order_in_question             | ë¬¸ì œ-ìš”ì†Œ ë§¤í•‘            |
| 10       | **text_versions**     | version_id, page_id, user_id, content, version_number, version_type | í…ìŠ¤íŠ¸ ë²„ì „ ê´€ë¦¬          |
| 11       | **formatting_rules**  | rule_id, doc_type_id, class_name, prefix, suffix, indent_level      | í¬ë§·íŒ… ê·œì¹™               |
| 12       | **combined_results**  | combined_id, project_id, combined_text, combined_stats              | í†µí•© ë¬¸ì„œ ìºì‹œ            |

## **ğŸ”· ìµœì¢… E-R ë‹¤ì´ì–´ê·¸ë¨ (ì‹œê°í™”)**

```
                                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                    â”‚           users                     â”‚
                                    â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
                                    â”‚ PK: user_id                         â”‚
                                    â”‚     email (UNIQUE)                  â”‚
                                    â”‚     name                            â”‚
                                    â”‚     role (admin/teacher/student)    â”‚
                                    â”‚     api_key (ì•”í˜¸í™”)                â”‚
                                    â”‚     password_hash                   â”‚
                                    â”‚     created_at                      â”‚
                                    â”‚     updated_at                      â”‚
                                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                â”‚
                                                â”‚ 1:N (í•œ ì‚¬ìš©ìëŠ” ì—¬ëŸ¬ í”„ë¡œì íŠ¸ ìƒì„±)
                                                â†“
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚                    document_types (ìˆ˜ì •)                      â”‚
                    â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
                    â”‚ PK: doc_type_id                                               â”‚
                    â”‚     type_name (worksheet/document/form) UNIQUE                â”‚
                    â”‚     model_name (SmartEyeSsen/DocLayout-YOLO)                  â”‚
(ìˆ˜ì •)              â”‚     sorting_method (question_based/reading_order)             â”‚
                    â”‚     description                                               â”‚
                    â”‚     created_at, updated_at                                    â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                â”‚
                                                â”‚ 1:N (í•œ íƒ€ì…ìœ¼ë¡œ ì—¬ëŸ¬ í”„ë¡œì íŠ¸)
                                                â†“
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚                      projects                                 â”‚
                    â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
                    â”‚ PK: project_id                                                â”‚
                    â”‚ FK: user_id â†’ users(user_id)                                  â”‚
                    â”‚ FK: doc_type_id â†’ document_types(doc_type_id)                 â”‚
                    â”‚     project_name                                              â”‚
                    â”‚     total_pages (ìë™ ê³„ì‚°)                                   â”‚
                    â”‚     analysis_mode (auto/manual/hybrid)                        â”‚
                    â”‚     status (created/in_progress/completed/error)              â”‚
                    â”‚     created_at, updated_at                                    â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚                           â”‚
                                    â”‚ 1:N                       â”‚ 1:1
                                    â”‚                           â”‚
                                    â†“                           â†“
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚              pages                    â”‚   â”‚      combined_results           â”‚
        â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚   â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
        â”‚ PK: page_id                           â”‚   â”‚ PK: combined_id                 â”‚
        â”‚ FK: project_id â†’ projects(project_id) â”‚   â”‚ FK: project_id (UNIQUE)         â”‚
        â”‚     page_number                       â”‚   â”‚     combined_text (LONGTEXT)    â”‚
        â”‚     image_path                        â”‚   â”‚     combined_stats (JSON)       â”‚
        â”‚     image_width, image_height         â”‚   â”‚     generated_at                â”‚
        â”‚     analysis_status (pending/         â”‚   â”‚     updated_at                  â”‚
        â”‚         processing/completed/error)   â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚     processing_time                   â”‚
        â”‚     created_at, analyzed_at           â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚                       â”‚
                    â”‚ 1:N                   â”‚ 1:N
                    â”‚                       â”‚
                    â†“                       â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚    layout_elements (ìˆ˜ì •)        â”‚  â”‚        text_versions                 â”‚
    â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚  â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
    â”‚ PK: element_id                 â”‚  â”‚ PK: version_id                       â”‚
    â”‚ FK: page_id â†’ pages(page_id)   â”‚  â”‚ FK: page_id â†’ pages(page_id)         â”‚
    â”‚     class_name                 â”‚  â”‚ FK: user_id â†’ users(user_id)         â”‚
    â”‚     confidence                 â”‚  â”‚     content (TEXT)                   â”‚
    â”‚     bbox_x, bbox_y             â”‚  â”‚     version_number                   â”‚
    â”‚     bbox_width, bbox_height    â”‚  â”‚     version_type (original/          â”‚
    â”‚     area (ìë™ ê³„ì‚°)            â”‚  â”‚         auto_formatted/user_edited)  â”‚
    â”‚     y_position (ìë™ ê³„ì‚°)      â”‚  â”‚     is_current (TRUE/FALSE)          â”‚
    â”‚     x_position (ìë™ ê³„ì‚°)      â”‚  â”‚     created_at                       â”‚
(ì‚­ì œ)â”‚     (order_index)              â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚     created_at                 â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚
                â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚ 1:1 (OCR)            â”‚ 1:1 (AI)             â”‚ 1:N (ìì‹ ìš”ì†Œ)      â”‚ 1:1 (ì•µì»¤)
                â”‚                      â”‚                      â”‚                      â”‚
                â†“                      â†“                      â†“                      â†“ (ê´€ê³„ ì¶”ê°€)
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚   text_contents     â”‚  â”‚  ai_descriptions    â”‚  â”‚   question_elements      â”‚ â”‚ question_groups (ìˆ˜ì •) â”‚
    â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚  â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚  â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚ â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
    â”‚ PK: text_id         â”‚  â”‚ PK: ai_desc_id      â”‚  â”‚ PK: qe_id                â”‚ â”‚ PK: question_group_id  â”‚
    â”‚ FK: element_id      â”‚  â”‚ FK: element_id      â”‚  â”‚ FK: question_group_id    â”‚ â”‚ FK: page_id            â”‚
    â”‚     (UNIQUE)        â”‚  â”‚     (UNIQUE)        â”‚  â”‚ FK: element_id           â”‚ â”‚ FK: anchor_element_id  â”‚ (ìˆ˜ì •)
    â”‚     ocr_text (TEXT) â”‚  â”‚     description     â”‚  â”‚     order_in_question    â”‚ â”‚     (UNIQUE)           â”‚
    â”‚     ocr_engine      â”‚  â”‚     ai_model        â”‚  â”‚     created_at           â”‚ â”‚     start_y, end_y     â”‚
    â”‚     ocr_confidence  â”‚  â”‚     prompt_used     â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚     element_count      â”‚
    â”‚     language        â”‚  â”‚     created_at      â”‚                â”‚              â”‚     created_at         â”‚
    â”‚     created_at      â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚ N:1          â”‚ (ì‚­ì œ) (question_number) â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                         â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                                    â”‚                           â†‘
                                                                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                                        1:N (ê·¸ë£¹ì€ ì—¬ëŸ¬ ìì‹ ìš”ì†Œë¥¼ ê°€ì§)

                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                        â”‚              formatting_rules                       â”‚
                        â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
                        â”‚ PK: rule_id                                         â”‚
                        â”‚ FK: doc_type_id â†’ document_types(doc_type_id)       â”‚
                        â”‚     class_name                                      â”‚
                        â”‚     prefix, suffix                                  â”‚
                        â”‚     indent_level                                    â”‚
                        â”‚     font_size, font_weight                          â”‚
                        â”‚     created_at, updated_at                          â”‚
                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

```

## **ğŸ”— ê´€ê³„(Relationships) ìƒì„¸ ì„¤ëª… (ìˆ˜ì •)**

### **1ï¸âƒ£ users â†” projects (1:N)**

```
- í•œ ì‚¬ìš©ìëŠ” ì—¬ëŸ¬ í”„ë¡œì íŠ¸ ìƒì„± ê°€ëŠ¥
- í•œ í”„ë¡œì íŠ¸ëŠ” í•œ ëª…ì˜ ì‚¬ìš©ìì—ê²Œë§Œ ì†í•¨
- FK: projects.user_id â†’ users.user_id
- ON DELETE CASCADE: ì‚¬ìš©ì ì‚­ì œ ì‹œ í”„ë¡œì íŠ¸ë„ ì‚­ì œ
```

### **2ï¸âƒ£ document_types â†” projects (1:N)**

```
- í•œ ë¬¸ì„œ íƒ€ì…(worksheet/document)ìœ¼ë¡œ ì—¬ëŸ¬ í”„ë¡œì íŠ¸ ìƒì„± ê°€ëŠ¥
- í•œ í”„ë¡œì íŠ¸ëŠ” í•˜ë‚˜ì˜ ë¬¸ì„œ íƒ€ì…ë§Œ ê°€ì§
- FK: projects.doc_type_id â†’ document_types.doc_type_id
- ON DELETE RESTRICT: íƒ€ì… ì‚¬ìš© ì¤‘ì´ë©´ ì‚­ì œ ë¶ˆê°€
```

### **3ï¸âƒ£ projects â†” pages (1:N)**

```
- í•œ í”„ë¡œì íŠ¸ëŠ” ì—¬ëŸ¬ í˜ì´ì§€ í¬í•¨
- í•œ í˜ì´ì§€ëŠ” í•˜ë‚˜ì˜ í”„ë¡œì íŠ¸ì—ë§Œ ì†í•¨
- FK: pages.project_id â†’ projects.project_id
- ON DELETE CASCADE: í”„ë¡œì íŠ¸ ì‚­ì œ ì‹œ í˜ì´ì§€ë„ ì‚­ì œ
- íŠ¸ë¦¬ê±°: í˜ì´ì§€ ì¶”ê°€ ì‹œ projects.total_pages ìë™ ì¦ê°€
```

### **4ï¸âƒ£ projects â†” combined_results (1:1)**

```
- í•œ í”„ë¡œì íŠ¸ëŠ” í•˜ë‚˜ì˜ í†µí•© ê²°ê³¼ ìºì‹œë§Œ ê°€ì§
- í•œ í†µí•© ê²°ê³¼ëŠ” í•˜ë‚˜ì˜ í”„ë¡œì íŠ¸ì—ë§Œ ì†í•¨
- FK: combined_results.project_id â†’ projects.project_id (UNIQUE)
- ON DELETE CASCADE: í”„ë¡œì íŠ¸ ì‚­ì œ ì‹œ ìºì‹œë„ ì‚­ì œ
```

### **5ï¸âƒ£ pages â†” layout_elements (1:N)**

```
- í•œ í˜ì´ì§€ëŠ” ì—¬ëŸ¬ ë ˆì´ì•„ì›ƒ ìš”ì†Œ í¬í•¨
- í•œ ìš”ì†ŒëŠ” í•˜ë‚˜ì˜ í˜ì´ì§€ì—ë§Œ ì†í•¨
- FK: layout_elements.page_id â†’ pages.page_id
- ON DELETE CASCADE: í˜ì´ì§€ ì‚­ì œ ì‹œ ìš”ì†Œë„ ì‚­ì œ
```

### **6ï¸âƒ£ pages â†” text_versions (1:N)**

```
- í•œ í˜ì´ì§€ëŠ” ì—¬ëŸ¬ í…ìŠ¤íŠ¸ ë²„ì „ ê°€ì§ (1, 2, 3, ...)
- í•œ ë²„ì „ì€ í•˜ë‚˜ì˜ í˜ì´ì§€ì—ë§Œ ì†í•¨
- FK: text_versions.page_id â†’ pages.page_id
- ON DELETE CASCADE: í˜ì´ì§€ ì‚­ì œ ì‹œ ëª¨ë“  ë²„ì „ ì‚­ì œ
- UNIQUE KEY: (page_id, version_number) - í˜ì´ì§€ ë‚´ ë²„ì „ ë²ˆí˜¸ ì¤‘ë³µ ë°©ì§€
```

### **7ï¸âƒ£ layout_elements â†” text_contents (1:1)**

```
- í•œ ë ˆì´ì•„ì›ƒ ìš”ì†ŒëŠ” í•˜ë‚˜ì˜ OCR ê²°ê³¼ë§Œ ê°€ì§
- í•œ OCR ê²°ê³¼ëŠ” í•˜ë‚˜ì˜ ìš”ì†Œì—ë§Œ ì†í•¨
- FK: text_contents.element_id â†’ layout_elements.element_id (UNIQUE)
- ON DELETE CASCADE: ìš”ì†Œ ì‚­ì œ ì‹œ OCR ê²°ê³¼ë„ ì‚­ì œ
```

### **8ï¸âƒ£ layout_elements â†” ai_descriptions (1:1)**

```
- í•œ ë ˆì´ì•„ì›ƒ ìš”ì†Œ(figure/table/flowchart)ëŠ” í•˜ë‚˜ì˜ AI ì„¤ëª…ë§Œ ê°€ì§
- í•œ AI ì„¤ëª…ì€ í•˜ë‚˜ì˜ ìš”ì†Œì—ë§Œ ì†í•¨
- FK: ai_descriptions.element_id â†’ layout_elements.element_id (UNIQUE)
- ON DELETE CASCADE: ìš”ì†Œ ì‚­ì œ ì‹œ AI ì„¤ëª…ë„ ì‚­ì œ
```

### **9ï¸âƒ£ pages â†” question_groups (1:N)**

```
- í•œ í˜ì´ì§€ëŠ” ì—¬ëŸ¬ ë¬¸ì œ ê·¸ë£¹ í¬í•¨
- í•œ ë¬¸ì œ ê·¸ë£¹ì€ í•˜ë‚˜ì˜ í˜ì´ì§€ì—ë§Œ ì†í•¨
- FK: question_groups.page_id â†’ pages.page_id
- ON DELETE CASCADE: í˜ì´ì§€ ì‚­ì œ ì‹œ ë¬¸ì œ ê·¸ë£¹ë„ ì‚­ì œ
```

### **ğŸ”Ÿ (ì‹ ê·œ) layout_elements â†” question_groups (1:1)**

```
- 'ì•µì»¤' ìš”ì†Œì™€ 'ë¬¸ì œ ê·¸ë£¹' ê°„ì˜ ê´€ê³„
- í•œ ë ˆì´ì•„ì›ƒ ìš”ì†Œ(ì•µì»¤)ëŠ” í•˜ë‚˜ì˜ ë¬¸ì œ ê·¸ë£¹ë§Œ ìƒì„± ê°€ëŠ¥
- í•œ ë¬¸ì œ ê·¸ë£¹ì€ í•˜ë‚˜ì˜ ì•µì»¤ ìš”ì†Œì— ì˜í•´ ìƒì„±ë¨
- FK: question_groups.anchor_element_id â†’ layout_elements.element_id
- ON DELETE CASCADE: ì•µì»¤ ìš”ì†Œ ì‚­ì œ ì‹œ, ê·¸ë£¹ ë° í•˜ìœ„ ìš”ì†Œ ë§¤í•‘(question_elements)ë„ ì—°ì‡„ ì‚­ì œ
```

### **1ï¸âƒ£1ï¸âƒ£ question_groups â†” question_elements (1:N)**

```
- 'ë¬¸ì œ ê·¸ë£¹'ê³¼ 'ìì‹ ìš”ì†Œ' ë§¤í•‘ ê°„ì˜ ê´€ê³„
- í•œ ë¬¸ì œ ê·¸ë£¹ì€ ì—¬ëŸ¬ ìì‹ ìš”ì†Œ(í…ìŠ¤íŠ¸, ê·¸ë¦¼, ì„ íƒì§€ ë“±)ë¥¼ í¬í•¨
- í•œ ë§¤í•‘ ë ˆì½”ë“œëŠ” í•˜ë‚˜ì˜ ë¬¸ì œ ê·¸ë£¹ì—ë§Œ ì†í•¨
- FK: question_elements.question_group_id â†’ question_groups.question_group_id
- ON DELETE CASCADE: ë¬¸ì œ ê·¸ë£¹ ì‚­ì œ ì‹œ ë§¤í•‘ë„ ì‚­ì œ
```

### **1ï¸âƒ£2ï¸âƒ£ layout_elements â†” question_elements (N:1)**

```
- 'ìì‹ ìš”ì†Œ'ì™€ 'ë§¤í•‘' ê°„ì˜ ê´€ê³„
- í•œ ë ˆì´ì•„ì›ƒ ìš”ì†Œ(ìì‹)ëŠ” í•˜ë‚˜ì˜ ë¬¸ì œ ê·¸ë£¹ì—ë§Œ ì†í•¨ (N:1)
- (í•œ ë¬¸ì œëŠ” ì—¬ëŸ¬ ìì‹ ìš”ì†Œë¥¼ ê°€ì§)
- FK: question_elements.element_id â†’ layout_elements.element_id
- ON DELETE CASCADE: ìì‹ ìš”ì†Œ ì‚­ì œ ì‹œ ë§¤í•‘ë„ ì‚­ì œ
- UNIQUE KEY: (question_group_id, element_id) - ì¤‘ë³µ ë§¤í•‘ ë°©ì§€
```

### **1ï¸âƒ£3ï¸âƒ£ document_types â†” formatting_rules (1:N)**

```
- í•œ ë¬¸ì„œ íƒ€ì…ì€ ì—¬ëŸ¬ í¬ë§·íŒ… ê·œì¹™ ê°€ì§
- í•œ ê·œì¹™ì€ í•˜ë‚˜ì˜ ë¬¸ì„œ íƒ€ì…ì—ë§Œ ì†í•¨
- FK: formatting_rules.doc_type_id â†’ document_types.doc_type_id
- ON DELETE CASCADE: íƒ€ì… ì‚­ì œ ì‹œ ê·œì¹™ë„ ì‚­ì œ
- UNIQUE KEY: (doc_type_id, class_name) - íƒ€ì…ë³„ í´ë˜ìŠ¤ ê·œì¹™ ì¤‘ë³µ ë°©ì§€
```
