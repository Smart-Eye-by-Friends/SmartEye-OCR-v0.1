# SmartEyeSsen API ë¬¸ì„œ - ê°œìš”

## ğŸ“– ëª©ì°¨
- [ì‹œìŠ¤í…œ ì†Œê°œ](#ì‹œìŠ¤í…œ-ì†Œê°œ)
- [ê¸°ìˆ  ìŠ¤íƒ](#ê¸°ìˆ -ìŠ¤íƒ)
- [ì‹œì‘í•˜ê¸°](#ì‹œì‘í•˜ê¸°)
- [ì¸ì¦](#ì¸ì¦)
- [ê¸°ë³¸ URL ë° í™˜ê²½ ì„¤ì •](#ê¸°ë³¸-url-ë°-í™˜ê²½-ì„¤ì •)
- [API ë¬¸ì„œ êµ¬ì„±](#api-ë¬¸ì„œ-êµ¬ì„±)
- [ë¹ ë¥¸ ì‹œì‘ ì˜ˆì œ](#ë¹ ë¥¸-ì‹œì‘-ì˜ˆì œ)

---

## ì‹œìŠ¤í…œ ì†Œê°œ

**SmartEyeSsen**ì€ ì‹œê°ì¥ì•  í•™ìƒì„ ìœ„í•œ AI ê¸°ë°˜ í•™ìŠµ ìë£Œ ë¶„ì„ ì‹œìŠ¤í…œì…ë‹ˆë‹¤. PDF ë˜ëŠ” ì´ë¯¸ì§€ í˜•íƒœì˜ í•™ìŠµ ìë£Œë¥¼ ì—…ë¡œë“œí•˜ë©´, AIê°€ ìë™ìœ¼ë¡œ ë ˆì´ì•„ì›ƒì„ ë¶„ì„í•˜ê³  í…ìŠ¤íŠ¸ë¥¼ ì¶”ì¶œí•˜ë©°, ë„í‘œì™€ ê·¸ë¦¼ì— ëŒ€í•œ ì„¤ëª…ì„ ìƒì„±í•©ë‹ˆë‹¤.

### ì£¼ìš” ê¸°ëŠ¥

#### ğŸ“„ ë‹¤ì¤‘ í˜ì´ì§€ ë¬¸ì„œ ì²˜ë¦¬
- **ì´ë¯¸ì§€ ì—…ë¡œë“œ**: ê°œë³„ í˜ì´ì§€ë¥¼ ì´ë¯¸ì§€ë¡œ ì—…ë¡œë“œ
- **PDF ì—…ë¡œë“œ**: PDF íŒŒì¼ì„ ìë™ìœ¼ë¡œ í˜ì´ì§€ë³„ë¡œ ë¶„í• í•˜ì—¬ ì²˜ë¦¬

#### ğŸ¤– AI ë ˆì´ì•„ì›ƒ ë¶„ì„
- DocLayout-YOLO ëª¨ë¸ì„ ì‚¬ìš©í•œ ìë™ ë ˆì´ì•„ì›ƒ ê°ì§€
- ë¬¸ì œ ë²ˆí˜¸(question_number), ë³¸ë¬¸(text), ë„í‘œ(figure), í‘œ(table) ë“± ìë™ ì¸ì‹

#### ğŸ” OCR í…ìŠ¤íŠ¸ ì¶”ì¶œ
- PaddleOCR ê¸°ë°˜ ê³ ì •ë°€ í…ìŠ¤íŠ¸ ì¸ì‹
- ë‹¤êµ­ì–´ ì§€ì› (í•œêµ­ì–´, ì˜ì–´, ì¼ë³¸ì–´, ì¤‘êµ­ì–´)

#### âœï¸ í…ìŠ¤íŠ¸ í¸ì§‘ ë° ë²„ì „ ê´€ë¦¬
- TinyMCE í¸ì§‘ê¸° ê¸°ë°˜ í…ìŠ¤íŠ¸ ìˆ˜ì •
- ìë™ ë²„ì „ ê´€ë¦¬ (ì›ë³¸, ìë™ í¬ë§·íŒ…, ì‚¬ìš©ì í¸ì§‘)

#### ğŸ–¼ï¸ AI ì„¤ëª… ìƒì„±
- GPT-4-turboë¥¼ í™œìš©í•œ ë„í‘œ/í‘œ/ìˆœì„œë„ ì„¤ëª… ìë™ ìƒì„±
- ì‹œê°ì¥ì• ì¸ì„ ìœ„í•œ ìƒì„¸í•œ ì„¤ëª… ì œê³µ

#### ğŸ“Š ì§€ëŠ¥í˜• ì •ë ¬
- **ë¬¸ì œì§€(Worksheet)**: ë¬¸ì œ ë²ˆí˜¸ ê¸°ë°˜ ê³„ì¸µì  ì •ë ¬
- **ì¼ë°˜ ë¬¸ì„œ(Document)**: ì¢Œí‘œ ê¸°ë°˜ ì½ê¸° ìˆœì„œ ì •ë ¬

#### ğŸ“¥ í†µí•© ë¬¸ì„œ ë‹¤ìš´ë¡œë“œ
- DOCX í˜•ì‹ìœ¼ë¡œ ì „ì²´ ë‚´ìš© ë‹¤ìš´ë¡œë“œ
- í˜ì´ì§€ë³„ í…ìŠ¤íŠ¸ í†µí•© ë° í¬ë§·íŒ… ì ìš©

---

## ê¸°ìˆ  ìŠ¤íƒ

### Backend
- **Framework**: FastAPI 0.104+
- **Database**: MySQL 8.0
- **ORM**: SQLAlchemy 2.0
- **Validation**: Pydantic v2
- **ë¬¸ì„œí™”**: Swagger/OpenAPI 3.0

### AI Models
- **Layout Detection**: DocLayout-YOLO
- **OCR**: PaddleOCR (í•œêµ­ì–´/ì˜ì–´/ì¤‘êµ­ì–´/ì¼ë³¸ì–´)
- **AI Description**: GPT-4-turbo (OpenAI)

### Document Processing
- **PDF**: PyMuPDF (fitz)
- **Image**: OpenCV, Pillow
- **Word**: python-docx

---

## ì‹œì‘í•˜ê¸°

### 1. ë°±ì—”ë“œ ì„œë²„ ì‹¤í–‰

#### í™˜ê²½ ë³€ìˆ˜ ì„¤ì •
`.env` íŒŒì¼ì„ ìƒì„±í•˜ì—¬ ë‹¤ìŒ ë‚´ìš©ì„ ì„¤ì •í•˜ì„¸ìš”:

```env
# ë°ì´í„°ë² ì´ìŠ¤ ì„¤ì •
DB_HOST=localhost
DB_PORT=3306
DB_USER=your_username
DB_PASSWORD=your_password
DB_NAME=smarteyessen_db

# API ì„œë²„ ì„¤ì •
API_HOST=0.0.0.0
API_PORT=8000
CORS_ORIGINS=http://localhost:3000,http://localhost:8080

# OpenAI API (ì„ íƒ ì‚¬í•­)
OPENAI_API_KEY=sk-...

# í™˜ê²½
ENVIRONMENT=development
```

#### ì„œë²„ ì‹œì‘

**Linux/Mac**:
```bash
cd Backend
chmod +x start_server.sh
./start_server.sh
```

**Windows**:
```cmd
cd Backend
start_server.bat
```

ì„œë²„ê°€ ì •ìƒì ìœ¼ë¡œ ì‹œì‘ë˜ë©´ ë‹¤ìŒê³¼ ê°™ì€ ë©”ì‹œì§€ê°€ í‘œì‹œë©ë‹ˆë‹¤:
```
ğŸš€ SmartEyeSsen Backend Starting...
âœ… Database connection successful
âœ… Database tables initialized
âœ… SmartEyeSsen Backend Ready!
ğŸ“– API Docs: http://localhost:8000/docs
```

### 2. API ë¬¸ì„œ í™•ì¸

ë¸Œë¼ìš°ì €ì—ì„œ ë‹¤ìŒ URLì— ì ‘ì†í•˜ì—¬ ì¸í„°ë™í‹°ë¸Œ API ë¬¸ì„œë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:

- **Swagger UI**: http://localhost:8000/docs
- **ReDoc**: http://localhost:8000/redoc
- **OpenAPI JSON**: http://localhost:8000/openapi.json

### 3. í—¬ìŠ¤ ì²´í¬

ì„œë²„ê°€ ì •ìƒì ìœ¼ë¡œ ì‘ë™í•˜ëŠ”ì§€ í™•ì¸:

```bash
curl http://localhost:8000/health
```

**ì‘ë‹µ ì˜ˆì‹œ**:
```json
{
  "status": "healthy",
  "database": "connected",
  "api_version": "1.0.0"
}
```

---

## ì¸ì¦

**í˜„ì¬ ë²„ì „ (v1.0.1)ì—ì„œëŠ” ì¸ì¦ì´ í•„ìš”í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.**

í–¥í›„ ë²„ì „ì—ì„œëŠ” ë‹¤ìŒê³¼ ê°™ì€ ì¸ì¦ ë°©ì‹ì´ ì¶”ê°€ë  ì˜ˆì •ì…ë‹ˆë‹¤:
- JWT (JSON Web Token) ê¸°ë°˜ ì¸ì¦
- OAuth 2.0 (Google, Naver ë“±)
- API Key ê¸°ë°˜ ì¸ì¦

---

## ê¸°ë³¸ URL ë° í™˜ê²½ ì„¤ì •

### Base URL

**ê°œë°œ í™˜ê²½**:
```
http://localhost:8000
```

**í”„ë¡œë•ì…˜ í™˜ê²½** (ë°°í¬ í›„):
```
https://api.smarteyessen.com
```

### API Endpoint êµ¬ì¡°

ëª¨ë“  API ì—”ë“œí¬ì¸íŠ¸ëŠ” `/api` ì ‘ë‘ì‚¬ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤:

```
/api/projects       # í”„ë¡œì íŠ¸ ê´€ë¦¬
/api/pages          # í˜ì´ì§€ ê´€ë¦¬
/api/analysis       # ë¶„ì„ ê´€ë ¨
```

### CORS ì„¤ì •

í”„ë¡ íŠ¸ì—”ë“œì—ì„œ APIë¥¼ í˜¸ì¶œí•˜ë ¤ë©´ CORS ì„¤ì •ì´ í•„ìš”í•©ë‹ˆë‹¤. `.env` íŒŒì¼ì˜ `CORS_ORIGINS`ì— í”„ë¡ íŠ¸ì—”ë“œ URLì„ ì¶”ê°€í•˜ì„¸ìš”:

```env
CORS_ORIGINS=http://localhost:3000,http://localhost:8080,https://yourdomain.com
```

---

## API ë¬¸ì„œ êµ¬ì„±

ì´ API ë¬¸ì„œëŠ” ë‹¤ìŒê³¼ ê°™ì´ êµ¬ì„±ë˜ì–´ ìˆìŠµë‹ˆë‹¤:

| ë¬¸ì„œ | ë‚´ìš© |
|------|------|
| [00_ê°œìš”.md](./00_ê°œìš”.md) | ì‹œìŠ¤í…œ ì†Œê°œ, ì‹œì‘í•˜ê¸°, ì¸ì¦ (í˜„ì¬ ë¬¸ì„œ) |
| [01_í”„ë¡œì íŠ¸_API.md](./01_í”„ë¡œì íŠ¸_API.md) | í”„ë¡œì íŠ¸ ìƒì„±, ì¡°íšŒ, ìˆ˜ì •, ì‚­ì œ |
| [02_í˜ì´ì§€_API.md](./02_í˜ì´ì§€_API.md) | ì´ë¯¸ì§€/PDF ì—…ë¡œë“œ, í˜ì´ì§€ ì¡°íšŒ, í…ìŠ¤íŠ¸ ê´€ë¦¬ |
| [03_ë¶„ì„_API.md](./03_ë¶„ì„_API.md) | ë°°ì¹˜ ë¶„ì„, ë¹„ë™ê¸° ë¶„ì„, ì‘ì—… ìƒíƒœ ì¡°íšŒ |
| [04_ë‹¤ìš´ë¡œë“œ_API.md](./04_ë‹¤ìš´ë¡œë“œ_API.md) | í†µí•© í…ìŠ¤íŠ¸ ì¡°íšŒ, Word ë¬¸ì„œ ë‹¤ìš´ë¡œë“œ |
| [05_ë°ì´í„°_ëª¨ë¸.md](./05_ë°ì´í„°_ëª¨ë¸.md) | ìŠ¤í‚¤ë§ˆ ë° Enum ì •ì˜ |
| [06_ì—ëŸ¬_ì²˜ë¦¬.md](./06_ì—ëŸ¬_ì²˜ë¦¬.md) | HTTP ìƒíƒœ ì½”ë“œ, ì—ëŸ¬ ì‘ë‹µ í˜•ì‹ |

---

## ë¹ ë¥¸ ì‹œì‘ ì˜ˆì œ

ë‹¤ìŒì€ í”„ë¡ íŠ¸ì—”ë“œì—ì„œ SmartEyeSsen APIë¥¼ ì‚¬ìš©í•˜ëŠ” ê¸°ë³¸ì ì¸ íë¦„ì…ë‹ˆë‹¤.

### 1ï¸âƒ£ í”„ë¡œì íŠ¸ ìƒì„±

```javascript
const createProject = async () => {
  const response = await fetch('http://localhost:8000/api/projects', {
    method: 'POST',
    headers: {
      'Content-Type': 'application/json',
    },
    body: JSON.stringify({
      project_name: 'ìˆ˜í•™ ë¬¸ì œì§‘ 1ë‹¨ì›',
      doc_type_id: 1,  // 1: worksheet, 2: document
      analysis_mode: 'auto',
      user_id: 1
    })
  });
  
  const project = await response.json();
  console.log('í”„ë¡œì íŠ¸ ìƒì„±:', project);
  return project;
};
```

### 2ï¸âƒ£ PDF ì—…ë¡œë“œ

```javascript
const uploadPDF = async (projectId, pdfFile) => {
  const formData = new FormData();
  formData.append('project_id', projectId);
  formData.append('file', pdfFile);
  
  const response = await fetch('http://localhost:8000/api/pages/upload', {
    method: 'POST',
    body: formData
  });
  
  const result = await response.json();
  console.log(`${result.total_created}ê°œ í˜ì´ì§€ ìƒì„±ë¨`);
  return result;
};
```

### 3ï¸âƒ£ í”„ë¡œì íŠ¸ ë¶„ì„ (ë¹„ë™ê¸°)

```javascript
const analyzeProject = async (projectId) => {
  const response = await fetch(`http://localhost:8000/api/projects/${projectId}/analyze`, {
    method: 'POST',
    headers: {
      'Content-Type': 'application/json',
    },
    body: JSON.stringify({
      use_ai_descriptions: true,
      api_key: 'sk-...'  // OpenAI API Key (ì„ íƒ)
    })
  });
  
  const result = await response.json();
  console.log('ë¶„ì„ ê²°ê³¼:', result);
  return result;
};
```

### 4ï¸âƒ£ í˜ì´ì§€ í…ìŠ¤íŠ¸ ì¡°íšŒ

```javascript
const getPageText = async (pageId) => {
  const response = await fetch(`http://localhost:8000/api/pages/${pageId}/text`);
  const textData = await response.json();
  console.log('í˜ì´ì§€ í…ìŠ¤íŠ¸:', textData.content);
  return textData;
};
```

### 5ï¸âƒ£ ì‚¬ìš©ì í¸ì§‘ í…ìŠ¤íŠ¸ ì €ì¥

```javascript
const saveEditedText = async (pageId, editedContent, userId) => {
  const response = await fetch(`http://localhost:8000/api/pages/${pageId}/text`, {
    method: 'POST',
    headers: {
      'Content-Type': 'application/json',
    },
    body: JSON.stringify({
      content: editedContent,
      user_id: userId
    })
  });
  
  const result = await response.json();
  console.log('í…ìŠ¤íŠ¸ ì €ì¥ ì™„ë£Œ:', result);
  return result;
};
```

### 6ï¸âƒ£ Word ë¬¸ì„œ ë‹¤ìš´ë¡œë“œ

```javascript
const downloadDocument = async (projectId) => {
  const response = await fetch(`http://localhost:8000/api/projects/${projectId}/download`, {
    method: 'POST'
  });
  
  const blob = await response.blob();
  const url = window.URL.createObjectURL(blob);
  const a = document.createElement('a');
  a.href = url;
  a.download = `project_${projectId}.docx`;
  document.body.appendChild(a);
  a.click();
  a.remove();
  window.URL.revokeObjectURL(url);
};
```

---

## React/Axios ì˜ˆì œ

Axiosë¥¼ ì‚¬ìš©í•˜ëŠ” ê²½ìš°:

```javascript
import axios from 'axios';

// API í´ë¼ì´ì–¸íŠ¸ ìƒì„±
const apiClient = axios.create({
  baseURL: 'http://localhost:8000',
  headers: {
    'Content-Type': 'application/json',
  }
});

// í”„ë¡œì íŠ¸ ìƒì„±
const createProject = async (projectData) => {
  try {
    const response = await apiClient.post('/api/projects', projectData);
    return response.data;
  } catch (error) {
    console.error('í”„ë¡œì íŠ¸ ìƒì„± ì‹¤íŒ¨:', error.response?.data);
    throw error;
  }
};

// PDF ì—…ë¡œë“œ
const uploadPDF = async (projectId, pdfFile) => {
  const formData = new FormData();
  formData.append('project_id', projectId);
  formData.append('file', pdfFile);
  
  try {
    const response = await apiClient.post('/api/pages/upload', formData, {
      headers: {
        'Content-Type': 'multipart/form-data',
      }
    });
    return response.data;
  } catch (error) {
    console.error('PDF ì—…ë¡œë“œ ì‹¤íŒ¨:', error.response?.data);
    throw error;
  }
};

// í”„ë¡œì íŠ¸ ë¶„ì„
const analyzeProject = async (projectId, useAI = true, apiKey = null) => {
  try {
    const response = await apiClient.post(`/api/projects/${projectId}/analyze`, {
      use_ai_descriptions: useAI,
      api_key: apiKey
    });
    return response.data;
  } catch (error) {
    console.error('ë¶„ì„ ì‹¤íŒ¨:', error.response?.data);
    throw error;
  }
};

export { createProject, uploadPDF, analyzeProject };
```

---

## ë‹¤ìŒ ë‹¨ê³„

API ì‚¬ìš© ë°©ë²•ì„ ë” ìì„¸íˆ ì•Œì•„ë³´ë ¤ë©´ ë‹¤ìŒ ë¬¸ì„œë¥¼ ì°¸ê³ í•˜ì„¸ìš”:

1. **[í”„ë¡œì íŠ¸ API](./01_í”„ë¡œì íŠ¸_API.md)**: í”„ë¡œì íŠ¸ ìƒì„±, ì¡°íšŒ, ìˆ˜ì •, ì‚­ì œ ë°©ë²•
2. **[í˜ì´ì§€ API](./02_í˜ì´ì§€_API.md)**: ì´ë¯¸ì§€/PDF ì—…ë¡œë“œ ë° í…ìŠ¤íŠ¸ ê´€ë¦¬
3. **[ë¶„ì„ API](./03_ë¶„ì„_API.md)**: AI ë¶„ì„ ì‹¤í–‰ ë° ì‘ì—… ìƒíƒœ ì¡°íšŒ
4. **[ë‹¤ìš´ë¡œë“œ API](./04_ë‹¤ìš´ë¡œë“œ_API.md)**: í†µí•© í…ìŠ¤íŠ¸ ë° ë¬¸ì„œ ë‹¤ìš´ë¡œë“œ
5. **[ë°ì´í„° ëª¨ë¸](./05_ë°ì´í„°_ëª¨ë¸.md)**: ìƒì„¸í•œ ìŠ¤í‚¤ë§ˆ ë° Enum ì •ì˜
6. **[ì—ëŸ¬ ì²˜ë¦¬](./06_ì—ëŸ¬_ì²˜ë¦¬.md)**: ì—ëŸ¬ ì½”ë“œ ë° ì²˜ë¦¬ ë°©ë²•

---

## ë¬¸ì˜ ë° ì§€ì›

- **GitHub Issues**: [SmartEyeSsen Issues](https://github.com/yourorg/smarteyessen/issues)
- **ì´ë©”ì¼**: support@smarteyessen.com
- **ë¬¸ì„œ ë²„ì „**: v1.0.1
- **ìµœì¢… ìˆ˜ì •ì¼**: 2025-01-22
