# ============================================================================
# SmartEyeSsen Backend Environment Variables (Production Template)
# ============================================================================
# 이 파일을 복사하여 .env 파일을 생성하고 실제 값으로 변경하세요.
# 명령어: cp .env.example .env
# ⚠️ .env 파일은 절대 Git에 커밋하지 마세요!

# ============================================================================
# 데이터베이스 설정 (MySQL)
# ============================================================================
# Docker Compose 사용 시: mysql (서비스 이름)
# 외부 MySQL 사용 시: 실제 호스트 주소
DB_HOST=mysql
DB_PORT=3306
DB_USER=root
DB_PASSWORD=change_this_to_strong_password_in_production
DB_NAME=smarteyessen_db

# 데이터베이스 URL (자동 생성, 수동 변경 불필요)
DATABASE_URL=mysql+pymysql://${DB_USER}:${DB_PASSWORD}@${DB_HOST}:${DB_PORT}/${DB_NAME}

# ============================================================================
# FastAPI 설정
# ============================================================================
API_HOST=0.0.0.0
API_PORT=8000
API_RELOAD=False
API_LOG_LEVEL=info

# 환경 설정 (development | production)
ENVIRONMENT=production

# ============================================================================
# OpenAI API 설정 (선택사항)
# ============================================================================
# Figure, Table, Flowchart AI 설명 생성에 사용
# 미설정 시 AI 설명 기능이 비활성화됩니다
OPENAI_API_KEY=your_openai_api_key_here

# ============================================================================
# 파일 업로드 설정
# ============================================================================
UPLOAD_DIR=uploads
MAX_FILE_SIZE=104857600  # 100MB (바이트 단위)
ALLOWED_EXTENSIONS=jpg,jpeg,png,pdf

# ============================================================================
# 보안 설정 (JWT - 선택사항)
# ============================================================================
# 랜덤 문자열 생성 방법: python -c "import secrets; print(secrets.token_urlsafe(32))"
SECRET_KEY=generate_random_secret_key_here_change_in_production
ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=30

# ============================================================================
# CORS 설정
# ============================================================================
# 프로덕션: 실제 도메인으로 변경
# Reverse Proxy 사용 시 Same-Origin이므로 불필요할 수 있음
CORS_ORIGINS=https://yourdomain.live,https://www.yourdomain.live

# ============================================================================
# Adaptive Sorter 설정
# ============================================================================
USE_ADAPTIVE_SORTER=true

# ============================================================================
# 기타 설정
# ============================================================================
DEBUG=False

# ============================================================================
# 페이지 처리 설정
# ============================================================================
# PDF 처리 DPI (150 = 속도 최적화, 300 = 품질 우선)
PDF_PROCESSOR_DPI=150

# 성능 설정 (4GB RAM 기준)
OPENAI_MAX_CONCURRENCY=30  # OpenAI API 최대 동시 요청 수
MAX_CONCURRENT_PAGES=8     # 최대 동시 페이지 처리 수

# GPU 환경에서는 아래 값으로 변경 가능
# OPENAI_MAX_CONCURRENCY=40
# MAX_CONCURRENT_PAGES=16
