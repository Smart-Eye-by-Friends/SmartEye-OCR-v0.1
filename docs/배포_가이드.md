# ğŸ³ SmartEye Docker í†µí•© ë°°í¬ ê°€ì´ë“œ

## ğŸ“Š ì‹œìŠ¤í…œ êµ¬ì„±

### ì„œë¹„ìŠ¤ êµ¬ì¡°
```
                  ì‚¬ìš©ì (http://localhost)
                           â†“
    nginx:80 (smarteye-nginx) [í”„ë¡ì‹œ + ì •ì íŒŒì¼ ì„œë¹™]
           â†“                              â†“
    Frontend (React)              Backend API (/api/*)
    [ì •ì  íŒŒì¼]              [smarteye-backend:8080]
                                        â†“
                            LAM Service (smarteye-lam-service:8001)
                                        â†“  
                             PostgreSQL (smarteye-postgres:5433)
```

### ì»¨í…Œì´ë„ˆ ëª©ë¡
- **smarteye-frontend**: React ì•± (ë¹Œë“œëœ ì •ì  íŒŒì¼)
- **smarteye-nginx**: Nginx í”„ë¡ì‹œ ì„œë²„ (í¬íŠ¸ 80)
- **smarteye-backend**: Java Spring Boot API ì„œë²„ (í¬íŠ¸ 8080)
- **smarteye-lam-service**: Python FastAPI LAM ì„œë¹„ìŠ¤ (í¬íŠ¸ 8001)
- **smarteye-postgres**: PostgreSQL ë°ì´í„°ë² ì´ìŠ¤ (í¬íŠ¸ 5433)

## ğŸš€ ë¹ ë¥¸ ì‹œì‘

í”„ë¡œì íŠ¸ ê´€ë¦¬ëŠ” ë£¨íŠ¸ ë””ë ‰í„°ë¦¬ì˜ `manage.sh` í†µí•© ìŠ¤í¬ë¦½íŠ¸ë¥¼ í†µí•´ ì´ë£¨ì–´ì§‘ë‹ˆë‹¤.

### 1. ì „ì²´ ì‹œìŠ¤í…œ ì‹œì‘
```bash
# SmartEye ë£¨íŠ¸ ë””ë ‰í„°ë¦¬ì—ì„œ ì‹¤í–‰
./manage.sh start
```

### 2. ì‹œìŠ¤í…œ ì ‘ì†
- **ì›¹ ì„œë¹„ìŠ¤**: http://localhost
- **Backend API**: http://localhost/api/health
- **Swagger UI**: http://localhost/api/swagger-ui.html

### 3. ì‹œìŠ¤í…œ ì¤‘ì§€
```bash
# SmartEye ë£¨íŠ¸ ë””ë ‰í„°ë¦¬ì—ì„œ ì‹¤í–‰
./manage.sh stop
```

### 4. ì‹œìŠ¤í…œ ìƒíƒœ í™•ì¸
```bash
./manage.sh status
```

## ğŸ”§ ê³ ê¸‰ ëª…ë ¹ì–´ (`manage.sh`)

`manage.sh` ìŠ¤í¬ë¦½íŠ¸ëŠ” ë‹¤ìŒê³¼ ê°™ì€ ë‹¤ì–‘í•œ ëª…ë ¹ì–´ë¥¼ ì œê³µí•©ë‹ˆë‹¤.

- **ì„œë¹„ìŠ¤ ì¬ì‹œì‘**:
  ```bash
  # íŠ¹ì • ì„œë¹„ìŠ¤(ì˜ˆ: backend) ì¬ì‹œì‘
  ./manage.sh restart smarteye-backend

  # ëª¨ë“  ì„œë¹„ìŠ¤ ì¬ì‹œì‘
  ./manage.sh restart
  ```

- **ì„œë¹„ìŠ¤ ì¬ë¹Œë“œ**:
  ```bash
  # íŠ¹ì • ì„œë¹„ìŠ¤(ì˜ˆ: frontend) ì¬ë¹Œë“œ
  ./manage.sh rebuild frontend

  # ëª¨ë“  ì„œë¹„ìŠ¤ ì¬ë¹Œë“œ
  ./manage.sh rebuild all
  ```

- **ë¡œê·¸ í™•ì¸**:
  ```bash
  # íŠ¹ì • ì„œë¹„ìŠ¤(ì˜ˆ: backend) ë¡œê·¸ ì‹¤ì‹œê°„ í™•ì¸
  ./manage.sh logs smarteye-backend

  # ëª¨ë“  ì„œë¹„ìŠ¤ ë¡œê·¸ í™•ì¸
  ./manage.sh logs
  ```

- **ì»¨í…Œì´ë„ˆ ë‚´ë¶€ ì ‘ì†**:
  ```bash
  # backend ì»¨í…Œì´ë„ˆì˜ bash ì…¸ ì‹¤í–‰
  docker exec -it smarteye-backend bash

  # postgres ì»¨í…Œì´ë„ˆì˜ psql ì‹¤í–‰
  docker exec -it smarteye-postgres psql -U smarteye -d smarteye_db
  ```

## ğŸ› ï¸ ê°œë°œ í™˜ê²½

### Frontend ê°œë³„ ê°œë°œ
```bash
# ê°œë°œ ëª¨ë“œ ì‹¤í–‰ (ë°±ì—”ë“œ ì„œë¹„ìŠ¤ë§Œ Dockerë¡œ ì‹¤í–‰)
./manage.sh dev
# ì˜µì…˜ 1 ì„ íƒ

# ìƒˆ í„°ë¯¸ë„ì„ ì—´ê³  Frontend ê°œë°œ ì„œë²„ ì‹¤í–‰
cd frontend
npm install
npm start  # http://localhost:3000 ì—ì„œ ì ‘ì†
```

### Backend ê°œë³„ ê°œë°œ
```bash
# ì˜ì¡´ ì„œë¹„ìŠ¤(DB, LAM)ë§Œ Dockerë¡œ ì‹¤í–‰
cd Backend
docker-compose up -d postgres lam-service

# IDE(IntelliJ ë“±)ì—ì„œ Spring Boot ì• í”Œë¦¬ì¼€ì´ì…˜ ì§ì ‘ ì‹¤í–‰
# 'dev' í”„ë¡œíŒŒì¼(application-dev.yml)ì„ í™œì„±í™”í•˜ì—¬ ì‹¤í–‰í•©ë‹ˆë‹¤.
```

## ğŸ“ íŒŒì¼ êµ¬ì¡°

```
SmartEye_v0.4/
â”œâ”€â”€ frontend/               # React í”„ë¡ íŠ¸ì—”ë“œ ì†ŒìŠ¤
â”‚   â””â”€â”€ Dockerfile
â”œâ”€â”€ Backend/
â”‚   â”œâ”€â”€ docker-compose.yml  # ì „ì²´ ì„œë¹„ìŠ¤ ì •ì˜
â”‚   â”œâ”€â”€ nginx/
â”‚   â”‚   â””â”€â”€ nginx.conf      # Nginx í”„ë¡ì‹œ ì„¤ì •
â”‚   â”œâ”€â”€ smarteye-backend/   # Java Spring Boot ë°±ì—”ë“œ ì†ŒìŠ¤
â”‚   â””â”€â”€ smarteye-lam-service/ # Python FastAPI AI ì„œë¹„ìŠ¤ ì†ŒìŠ¤
â””â”€â”€ manage.sh               # âœ¨ í†µí•© ê´€ë¦¬ ìŠ¤í¬ë¦½íŠ¸
```

## ğŸ” ë¬¸ì œ í•´ê²° (Troubleshooting)

- **í¬íŠ¸ ì¶©ëŒ**: `lsof -i :80` ëª…ë ¹ì–´ë¡œ í¬íŠ¸ ì‚¬ìš© í˜„í™©ì„ í™•ì¸í•˜ê³ , ì¶©ëŒí•˜ëŠ” í”„ë¡œì„¸ìŠ¤ë¥¼ ì¢…ë£Œí•˜ì„¸ìš”.
- **ë©”ëª¨ë¦¬ ë¶€ì¡±**: `docker stats`ë¡œ ì»¨í…Œì´ë„ˆ ë¦¬ì†ŒìŠ¤ ì‚¬ìš©ëŸ‰ì„ í™•ì¸í•˜ê³ , `docker system prune -a`ë¡œ ë¶ˆí•„ìš”í•œ ë¦¬ì†ŒìŠ¤ë¥¼ ì •ë¦¬í•˜ì„¸ìš”.
- **ë°ì´í„°ë² ì´ìŠ¤ ì´ˆê¸°í™”**: `./manage.sh stop` ì‹¤í–‰ ì‹œ ë°ì´í„° ë³¼ë¥¨ ì‚­ì œ ì˜µì…˜(y)ì„ ì„ íƒí•˜ì—¬ DBë¥¼ ì´ˆê¸°í™”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
- **ë¹Œë“œ ì‹¤íŒ¨**: `./manage.sh rebuild [ì„œë¹„ìŠ¤ëª…]` ë˜ëŠ” `./manage.sh rebuild all`ì„ ì‚¬ìš©í•˜ì—¬ ìºì‹œ ì—†ì´ ë‹¤ì‹œ ë¹Œë“œí•˜ì„¸ìš”.

## ğŸš¨ ì¤‘ìš” ì°¸ê³ ì‚¬í•­

1.  **ì´ˆê¸° ë¹Œë“œ**: ìµœì´ˆ `./manage.sh start` ì‹¤í–‰ ì‹œ Docker ì´ë¯¸ì§€ ë¹Œë“œë¡œ ì¸í•´ 5-10ë¶„ ì´ìƒ ì†Œìš”ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
2.  **ë©”ëª¨ë¦¬ ìš”êµ¬ì‚¬í•­**: ì›í™œí•œ ì‹¤í–‰ì„ ìœ„í•´ ìµœì†Œ 8GB RAMì„ ê¶Œì¥í•©ë‹ˆë‹¤.
3.  **ë””ìŠ¤í¬ ìš©ëŸ‰**: ëª¨ë“  ì´ë¯¸ì§€ë¥¼ í¬í•¨í•˜ì—¬ ìµœì†Œ 10GBì˜ ì—¬ìœ  ê³µê°„ì´ í•„ìš”í•©ë‹ˆë‹¤.
4.  **ë„¤íŠ¸ì›Œí¬**: ëª¨ë“  ì„œë¹„ìŠ¤ëŠ” `smarteye-network`ë¼ëŠ” ë‚´ë¶€ Docker ë„¤íŠ¸ì›Œí¬ë¥¼ í†µí•´ í†µì‹ í•©ë‹ˆë‹¤.
