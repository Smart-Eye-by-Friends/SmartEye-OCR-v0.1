# 개발용 Dockerfile - Hot Reload 지원
FROM node:18-alpine

# Set working directory
WORKDIR /app

# Add `/app/node_modules/.bin` to PATH
ENV PATH="/app/node_modules/.bin:$PATH"

# Copy package files
COPY package*.json ./

# Install all dependencies (including dev dependencies)
RUN npm install --silent

# Install serve globally for potential use
RUN npm install -g serve

# Expose port
EXPOSE 3000

# Add healthcheck
HEALTHCHECK --interval=30s --timeout=3s --start-period=10s --retries=3 \
    CMD curl -f http://localhost:3000/ || exit 1

# Start development server with hot reload
CMD ["npm", "start"]